diff -r 2875e8ba09ec Makefile
--- a/Makefile	Thu Oct 04 11:16:29 2012 +0200
+++ b/Makefile	Thu Oct 04 16:18:40 2012 +0200
@@ -210,7 +210,7 @@
 CXXFLAGS = -g -O2 -fvisibility-inlines-hidden
 CYGPATH_W = echo
 DEBUGFLAGS = -g
-DEFS = -DPACKAGE_NAME=\"libtorrent-rasterbar\" -DPACKAGE_TARNAME=\"libtorrent-rasterbar\" -DPACKAGE_VERSION=\"0.16.3\" -DPACKAGE_STRING=\"libtorrent-rasterbar\ 0.16.3\" -DPACKAGE_BUGREPORT=\"arvid@cs.umu.se\" -DPACKAGE_URL=\"http://www.libtorrent.org\" -DPACKAGE=\"libtorrent-rasterbar\" -DVERSION=\"0.16.3\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\".libs/\" -DHAVE_PTHREAD=1 -DHAVE_BOOST=1 -DHAVE_BOOST_SYSTEM=1 -DHAVE_GETHOSTBYNAME=1 -DHAVE_GETHOSTBYNAME_R=1 -DGETHOSTBYNAME_R_RETURNS_INT=1 -DHAVE_LIBRT=1 -DTORRENT_DEBUG=1 -DTORRENT_USE_OPENSSL=1 -DTORRENT_DISABLE_GEO_IP=1 -DTORRENT_DISABLE_DHT=1 -DTORRENT_DISABLE_POOL_ALLOCATOR=1 -DHAVE_LINUX_FIEMAP_H=1 -DBOOST_ASIO_HASH_MAP_BUCKETS=1021 -DBOOST_EXCEPTION_DISABLE=1 -DBOOST_ASIO_ENABLE_CANCELIO=1 -DBOOST_ASIO_DYN_LINK=1 -DTORRENT_BUILDING_SHARED=1
+DEFS = -DPACKAGE_NAME=\"libtorrent-rasterbar\" -DPACKAGE_TARNAME=\"libtorrent-rasterbar\" -DPACKAGE_VERSION=\"0.16.3\" -DPACKAGE_STRING=\"libtorrent-rasterbar\ 0.16.3\" -DPACKAGE_BUGREPORT=\"arvid@cs.umu.se\" -DPACKAGE_URL=\"http://www.libtorrent.org\" -DPACKAGE=\"libtorrent-rasterbar\" -DVERSION=\"0.16.3\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\".libs/\" -DHAVE_PTHREAD=1 -DHAVE_BOOST=1 -DHAVE_BOOST_SYSTEM=1 -DHAVE_GETHOSTBYNAME=1 -DHAVE_GETHOSTBYNAME_R=1 -DGETHOSTBYNAME_R_RETURNS_INT=1 -DHAVE_LIBRT=1 -DTORRENT_DEBUG=1 -DTORRENT_USE_OPENSSL=1 -DTORRENT_DISABLE_GEO_IP=1 -DTORRENT_DISABLE_DHT=1 -DTORRENT_DISABLE_POOL_ALLOCATOR=1 -DHAVE_LINUX_FIEMAP_H=1 -DBOOST_ASIO_HASH_MAP_BUCKETS=1021 -DBOOST_EXCEPTION_DISABLE=1 -DBOOST_ASIO_ENABLE_CANCELIO=1 -DBOOST_ASIO_DYN_LINK=1 -DTORRENT_BUILDING_SHARED=1 -DBOOST_ASIO_DISABLE_EPOLL=1 -DBOOST_ASIO_DISABLE_EVENTFD=1
 DEPDIR = .deps
 DLLTOOL = false
 DSYMUTIL = 
diff -r 2875e8ba09ec examples/Makefile
--- a/examples/Makefile	Thu Oct 04 11:16:29 2012 +0200
+++ b/examples/Makefile	Thu Oct 04 16:18:40 2012 +0200
@@ -177,17 +177,17 @@
 BOOST_VERSION = 1.44
 CC = gcc
 CCDEPMODE = depmode=gcc3
-CFLAGS = -lpthread -g -O2 -fvisibility=hidden
+CFLAGS = -lpthread -g -O0 -fvisibility=hidden -fPIC
 COMPILETIME_OPTIONS =  -DTORRENT_DEBUG  -DTORRENT_USE_OPENSSL  -DTORRENT_DISABLE_GEO_IP  -DTORRENT_DISABLE_DHT  -DBOOST_ASIO_HASH_MAP_BUCKETS=1021  -DBOOST_EXCEPTION_DISABLE  -DBOOST_ASIO_ENABLE_CANCELIO  -DBOOST_ASIO_DYN_LINK -DTORRENT_LINKING_SHARED 
 CPP = gcc -E
 CPPFLAGS = -I/usr/include 
 CXX = g++
 CXXCPP = g++ -E
 CXXDEPMODE = depmode=gcc3
-CXXFLAGS = -g -O2 -fvisibility-inlines-hidden
+CXXFLAGS = -g -O0 -fvisibility-inlines-hidden -fPIC
 CYGPATH_W = echo
 DEBUGFLAGS = -g
-DEFS = -DPACKAGE_NAME=\"libtorrent-rasterbar\" -DPACKAGE_TARNAME=\"libtorrent-rasterbar\" -DPACKAGE_VERSION=\"0.16.3\" -DPACKAGE_STRING=\"libtorrent-rasterbar\ 0.16.3\" -DPACKAGE_BUGREPORT=\"arvid@cs.umu.se\" -DPACKAGE_URL=\"http://www.libtorrent.org\" -DPACKAGE=\"libtorrent-rasterbar\" -DVERSION=\"0.16.3\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\".libs/\" -DHAVE_PTHREAD=1 -DHAVE_BOOST=1 -DHAVE_BOOST_SYSTEM=1 -DHAVE_GETHOSTBYNAME=1 -DHAVE_GETHOSTBYNAME_R=1 -DGETHOSTBYNAME_R_RETURNS_INT=1 -DHAVE_LIBRT=1 -DTORRENT_DEBUG=1 -DTORRENT_USE_OPENSSL=1 -DTORRENT_DISABLE_GEO_IP=1 -DTORRENT_DISABLE_DHT=1 -DTORRENT_DISABLE_POOL_ALLOCATOR=1 -DHAVE_LINUX_FIEMAP_H=1 -DBOOST_ASIO_HASH_MAP_BUCKETS=1021 -DBOOST_EXCEPTION_DISABLE=1 -DBOOST_ASIO_ENABLE_CANCELIO=1 -DBOOST_ASIO_DYN_LINK=1 -DTORRENT_BUILDING_SHARED=1
+DEFS = -DPACKAGE_NAME=\"libtorrent-rasterbar\" -DPACKAGE_TARNAME=\"libtorrent-rasterbar\" -DPACKAGE_VERSION=\"0.16.3\" -DPACKAGE_STRING=\"libtorrent-rasterbar\ 0.16.3\" -DPACKAGE_BUGREPORT=\"arvid@cs.umu.se\" -DPACKAGE_URL=\"http://www.libtorrent.org\" -DPACKAGE=\"libtorrent-rasterbar\" -DVERSION=\"0.16.3\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\".libs/\" -DHAVE_PTHREAD=1 -DHAVE_BOOST=1 -DHAVE_BOOST_SYSTEM=1 -DHAVE_GETHOSTBYNAME=1 -DHAVE_GETHOSTBYNAME_R=1 -DGETHOSTBYNAME_R_RETURNS_INT=1 -DHAVE_LIBRT=1 -DTORRENT_DEBUG=1 -DTORRENT_USE_OPENSSL=1 -DTORRENT_DISABLE_GEO_IP=1 -DTORRENT_DISABLE_DHT=1 -DTORRENT_DISABLE_POOL_ALLOCATOR=1 -DHAVE_LINUX_FIEMAP_H=1 -DBOOST_ASIO_HASH_MAP_BUCKETS=1021 -DBOOST_EXCEPTION_DISABLE=1 -DBOOST_ASIO_ENABLE_CANCELIO=1 -DBOOST_ASIO_DYN_LINK=1 -DTORRENT_BUILDING_SHARED=1 -DBOOST_ASIO_DISABLE_EPOLL=1 -DBOOST_ASIO_DISABLE_EVENTFD=1
 DEPDIR = .deps
 DLLTOOL = false
 DSYMUTIL = 
@@ -208,7 +208,7 @@
 INSTALL_STRIP_PROGRAM = $(install_sh) -c -s
 INTERFACE_VERSION_INFO = 6:0:0
 LD = /usr/bin/ld -m elf_x86_64
-LDFLAGS = -L/usr/lib 
+LDFLAGS = -L/usr/lib -pie
 LIBOBJS = 
 LIBS = -lrt -lpthread  
 LIBTOOL = $(SHELL) $(top_builddir)/libtool
diff -r 2875e8ba09ec include/libtorrent/config.hpp
--- a/include/libtorrent/config.hpp	Thu Oct 04 11:16:29 2012 +0200
+++ b/include/libtorrent/config.hpp	Thu Oct 04 16:18:40 2012 +0200
@@ -198,7 +198,7 @@
 // ==== LINUX ===
 #elif defined __linux__
 #define TORRENT_LINUX
-#define TORRENT_USE_IFADDRS 1
+//#define TORRENT_USE_IFADDRS 1
 #define TORRENT_USE_NETLINK 1
 #define TORRENT_USE_IFCONF 1
 #define TORRENT_HAS_SALEN 0
@@ -522,6 +522,8 @@
 #define TORRENT_DECLARE_DUMMY(x, y)
 #endif // BOOST_NO_EXCEPTIONS
 
+#define TORRENT_USE_ICONV 0
+#define TORRENT_DISABLE_POOL_ALLOCATOR 1
 
 #endif // TORRENT_CONFIG_HPP_INCLUDED
 
diff -r 2875e8ba09ec src/Makefile
--- a/src/Makefile	Thu Oct 04 11:16:29 2012 +0200
+++ b/src/Makefile	Thu Oct 04 16:18:40 2012 +0200
@@ -244,7 +244,7 @@
 CXXFLAGS = -g -O2 -fvisibility-inlines-hidden
 CYGPATH_W = echo
 DEBUGFLAGS = -g
-DEFS = -DPACKAGE_NAME=\"libtorrent-rasterbar\" -DPACKAGE_TARNAME=\"libtorrent-rasterbar\" -DPACKAGE_VERSION=\"0.16.3\" -DPACKAGE_STRING=\"libtorrent-rasterbar\ 0.16.3\" -DPACKAGE_BUGREPORT=\"arvid@cs.umu.se\" -DPACKAGE_URL=\"http://www.libtorrent.org\" -DPACKAGE=\"libtorrent-rasterbar\" -DVERSION=\"0.16.3\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\".libs/\" -DHAVE_PTHREAD=1 -DHAVE_BOOST=1 -DHAVE_BOOST_SYSTEM=1 -DHAVE_GETHOSTBYNAME=1 -DHAVE_GETHOSTBYNAME_R=1 -DGETHOSTBYNAME_R_RETURNS_INT=1 -DHAVE_LIBRT=1 -DTORRENT_DEBUG=1 -DTORRENT_USE_OPENSSL=1 -DTORRENT_DISABLE_GEO_IP=1 -DTORRENT_DISABLE_DHT=1 -DTORRENT_DISABLE_POOL_ALLOCATOR=1 -DHAVE_LINUX_FIEMAP_H=1 -DBOOST_ASIO_HASH_MAP_BUCKETS=1021 -DBOOST_EXCEPTION_DISABLE=1 -DBOOST_ASIO_ENABLE_CANCELIO=1 -DBOOST_ASIO_DYN_LINK=1 -DTORRENT_BUILDING_SHARED=1
+DEFS = -DPACKAGE_NAME=\"libtorrent-rasterbar\" -DPACKAGE_TARNAME=\"libtorrent-rasterbar\" -DPACKAGE_VERSION=\"0.16.3\" -DPACKAGE_STRING=\"libtorrent-rasterbar\ 0.16.3\" -DPACKAGE_BUGREPORT=\"arvid@cs.umu.se\" -DPACKAGE_URL=\"http://www.libtorrent.org\" -DPACKAGE=\"libtorrent-rasterbar\" -DVERSION=\"0.16.3\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\".libs/\" -DHAVE_PTHREAD=1 -DHAVE_BOOST=1 -DHAVE_BOOST_SYSTEM=1 -DHAVE_GETHOSTBYNAME=1 -DHAVE_GETHOSTBYNAME_R=1 -DGETHOSTBYNAME_R_RETURNS_INT=1 -DHAVE_LIBRT=1 -DTORRENT_DEBUG=1 -DTORRENT_USE_OPENSSL=1 -DTORRENT_DISABLE_GEO_IP=1 -DTORRENT_DISABLE_DHT=1 -DTORRENT_DISABLE_POOL_ALLOCATOR=1 -DHAVE_LINUX_FIEMAP_H=1 -DBOOST_ASIO_HASH_MAP_BUCKETS=1021 -DBOOST_EXCEPTION_DISABLE=1 -DBOOST_ASIO_ENABLE_CANCELIO=1 -DBOOST_ASIO_DYN_LINK=1 -DTORRENT_BUILDING_SHARED=1 -DBOOST_ASIO_DISABLE_EPOLL=1 -DBOOST_ASIO_DISABLE_EVENTFD=1
 DEPDIR = .deps
 DLLTOOL = false
 DSYMUTIL = 
